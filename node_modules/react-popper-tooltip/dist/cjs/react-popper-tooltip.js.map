{"version":3,"file":"react-popper-tooltip.js","sources":["../../src/utils.ts","../../src/usePopperTooltip.ts"],"sourcesContent":["import * as React from 'react';\n\n// kudos to @tannerlinsley https://twitter.com/tannerlinsley\nexport function useGetLatest<T>(val: T) {\n  const ref = React.useRef<T>(val);\n  ref.current = val;\n  return React.useCallback(() => ref.current, []);\n}\n\nconst noop = () => {\n  // do nothing\n};\n\nexport function useControlledState<T>({\n  initial,\n  value,\n  onChange = noop,\n}: {\n  initial?: T;\n  value?: T;\n  onChange?: (state: T) => void;\n}): [T, (state: T) => void] {\n  if (initial === undefined && value === undefined) {\n    throw new TypeError(\n      'Either \"value\" or \"initial\" variable must be set. Now both are undefined'\n    );\n  }\n\n  const [state, setState] = React.useState(initial);\n\n  const getLatest = useGetLatest(state);\n\n  const set = React.useCallback(\n    (updater: T) => {\n      const state = getLatest();\n\n      const updatedState =\n        typeof updater === 'function' ? updater(state) : updater;\n\n      if (typeof updatedState.persist === 'function') updatedState.persist();\n\n      setState(updatedState);\n      if (typeof onChange === 'function') onChange(updatedState);\n    },\n    [getLatest, onChange]\n  );\n\n  const isControlled = value !== undefined;\n\n  return [isControlled ? value! : state!, isControlled ? onChange : set];\n}\n\nexport function generateBoundingClientRect(x = 0, y = 0) {\n  return () => ({\n    width: 0,\n    height: 0,\n    top: y,\n    right: x,\n    bottom: y,\n    left: x,\n  });\n}\n","import * as React from 'react';\nimport { usePopper } from 'react-popper';\nimport {\n  useControlledState,\n  useGetLatest,\n  generateBoundingClientRect,\n} from './utils';\nimport { Config, PopperOptions, PropsGetterArgs, TriggerType } from './types';\n\nconst virtualElement = {\n  getBoundingClientRect: generateBoundingClientRect(),\n};\n\nconst defaultConfig: Config = {\n  closeOnOutsideClick: true,\n  closeOnTriggerHidden: false,\n  defaultVisible: false,\n  delayHide: 0,\n  delayShow: 0,\n  followCursor: false,\n  interactive: false,\n  mutationObserverOptions: {\n    attributes: true,\n    childList: true,\n    subtree: true,\n  },\n  offset: [0, 6],\n  trigger: 'hover',\n};\n\nexport function usePopperTooltip(\n  config: Config = {},\n  popperOptions: PopperOptions = {}\n) {\n  // Merging options with default options.\n  // Keys with undefined values are replaced with the default ones if any.\n  // Keys with other values pass through.\n  const finalConfig = (\n    Object.keys(defaultConfig) as Array<keyof typeof defaultConfig>\n  ).reduce(\n    (config, key) => ({\n      ...config,\n      [key]: config[key] !== undefined ? config[key] : defaultConfig[key],\n    }),\n    config\n  );\n\n  const defaultModifiers = React.useMemo(\n    () => [{ name: 'offset', options: { offset: finalConfig.offset } }],\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    Array.isArray(finalConfig.offset) ? finalConfig.offset : []\n  );\n\n  const finalPopperOptions = {\n    ...popperOptions,\n    placement: popperOptions.placement || finalConfig.placement,\n    modifiers: popperOptions.modifiers || defaultModifiers,\n  };\n\n  const [triggerRef, setTriggerRef] = React.useState<HTMLElement | null>(null);\n  const [tooltipRef, setTooltipRef] = React.useState<HTMLElement | null>(null);\n  const [visible, setVisible] = useControlledState({\n    initial: finalConfig.defaultVisible,\n    value: finalConfig.visible,\n    onChange: finalConfig.onVisibleChange,\n  });\n\n  const timer = React.useRef<number>();\n  React.useEffect(() => () => clearTimeout(timer.current), []);\n\n  const { styles, attributes, ...popperProps } = usePopper(\n    finalConfig.followCursor ? virtualElement : triggerRef,\n    tooltipRef,\n    finalPopperOptions\n  );\n\n  const update = popperProps.update;\n\n  const getLatest = useGetLatest({\n    visible,\n    triggerRef,\n    tooltipRef,\n    finalConfig,\n  });\n\n  const isTriggeredBy = React.useCallback(\n    (trigger: TriggerType) => {\n      return Array.isArray(finalConfig.trigger)\n        ? finalConfig.trigger.includes(trigger)\n        : finalConfig.trigger === trigger;\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    Array.isArray(finalConfig.trigger)\n      ? finalConfig.trigger\n      : [finalConfig.trigger]\n  );\n\n  const hideTooltip = React.useCallback(() => {\n    clearTimeout(timer.current);\n    timer.current = window.setTimeout(\n      () => setVisible(false),\n      finalConfig.delayHide\n    );\n  }, [finalConfig.delayHide, setVisible]);\n\n  const showTooltip = React.useCallback(() => {\n    clearTimeout(timer.current);\n    timer.current = window.setTimeout(\n      () => setVisible(true),\n      finalConfig.delayShow\n    );\n  }, [finalConfig.delayShow, setVisible]);\n\n  const toggleTooltip = React.useCallback(() => {\n    if (getLatest().visible) {\n      hideTooltip();\n    } else {\n      showTooltip();\n    }\n  }, [getLatest, hideTooltip, showTooltip]);\n\n  // Handle click outside\n  React.useEffect(() => {\n    if (!getLatest().finalConfig.closeOnOutsideClick) return;\n\n    const handleClickOutside: EventListener = (event) => {\n      const { tooltipRef, triggerRef } = getLatest();\n      const target = event.composedPath?.()?.[0] || event.target;\n      if (target instanceof Node) {\n        if (\n          tooltipRef != null &&\n          triggerRef != null &&\n          !tooltipRef.contains(target) &&\n          !triggerRef.contains(target)\n        ) {\n          hideTooltip();\n        }\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [getLatest, hideTooltip]);\n\n  // Trigger: click\n  React.useEffect(() => {\n    if (triggerRef == null || !isTriggeredBy('click')) return;\n\n    triggerRef.addEventListener('click', toggleTooltip);\n\n    return () => triggerRef.removeEventListener('click', toggleTooltip);\n  }, [triggerRef, isTriggeredBy, toggleTooltip]);\n\n  // Trigger: right-click\n  React.useEffect(() => {\n    if (triggerRef == null || !isTriggeredBy('right-click')) return;\n\n    const preventDefaultAndToggle: EventListener = (event) => {\n      // Don't show the context menu\n      event.preventDefault();\n      toggleTooltip();\n    };\n\n    triggerRef.addEventListener('contextmenu', preventDefaultAndToggle);\n    return () =>\n      triggerRef.removeEventListener('contextmenu', preventDefaultAndToggle);\n  }, [triggerRef, isTriggeredBy, toggleTooltip]);\n\n  // Trigger: focus\n  React.useEffect(() => {\n    if (triggerRef == null || !isTriggeredBy('focus')) return;\n\n    triggerRef.addEventListener('focus', showTooltip);\n    triggerRef.addEventListener('blur', hideTooltip);\n    return () => {\n      triggerRef.removeEventListener('focus', showTooltip);\n      triggerRef.removeEventListener('blur', hideTooltip);\n    };\n  }, [triggerRef, isTriggeredBy, showTooltip, hideTooltip]);\n\n  // Trigger: hover on trigger\n  React.useEffect(() => {\n    if (triggerRef == null || !isTriggeredBy('hover')) return;\n\n    triggerRef.addEventListener('mouseenter', showTooltip);\n    triggerRef.addEventListener('mouseleave', hideTooltip);\n    return () => {\n      triggerRef.removeEventListener('mouseenter', showTooltip);\n      triggerRef.removeEventListener('mouseleave', hideTooltip);\n    };\n  }, [triggerRef, isTriggeredBy, showTooltip, hideTooltip]);\n\n  // Trigger: hover on tooltip, keep it open if hovered\n  React.useEffect(() => {\n    if (tooltipRef == null || !getLatest().finalConfig.interactive) return;\n\n    tooltipRef.addEventListener('mouseenter', showTooltip);\n    tooltipRef.addEventListener('mouseleave', hideTooltip);\n    return () => {\n      tooltipRef.removeEventListener('mouseenter', showTooltip);\n      tooltipRef.removeEventListener('mouseleave', hideTooltip);\n    };\n  }, [tooltipRef, showTooltip, hideTooltip, getLatest]);\n\n  // Handle closing tooltip if trigger hidden\n  const isReferenceHidden =\n    popperProps?.state?.modifiersData?.hide?.isReferenceHidden;\n  React.useEffect(() => {\n    if (finalConfig.closeOnTriggerHidden && isReferenceHidden) hideTooltip();\n  }, [finalConfig.closeOnTriggerHidden, hideTooltip, isReferenceHidden]);\n\n  // Handle follow cursor\n  React.useEffect(() => {\n    if (!finalConfig.followCursor || triggerRef == null) return;\n\n    function setMousePosition({\n      clientX,\n      clientY,\n    }: {\n      clientX: number;\n      clientY: number;\n    }) {\n      virtualElement.getBoundingClientRect = generateBoundingClientRect(\n        clientX,\n        clientY\n      );\n      update?.();\n    }\n\n    triggerRef.addEventListener('mousemove', setMousePosition);\n    return () => triggerRef.removeEventListener('mousemove', setMousePosition);\n  }, [finalConfig.followCursor, triggerRef, update]);\n\n  // Handle tooltip DOM mutation changes (aka mutation observer)\n  React.useEffect(() => {\n    if (\n      tooltipRef == null ||\n      update == null ||\n      finalConfig.mutationObserverOptions == null\n    )\n      return;\n\n    const observer = new MutationObserver(update);\n    observer.observe(tooltipRef, finalConfig.mutationObserverOptions);\n    return () => observer.disconnect();\n  }, [finalConfig.mutationObserverOptions, tooltipRef, update]);\n\n  // Tooltip props getter\n  const getTooltipProps = (args: PropsGetterArgs = {}) => {\n    return {\n      ...args,\n      style: {\n        ...args.style,\n        ...styles.popper,\n      },\n      ...attributes.popper,\n      'data-popper-interactive': finalConfig.interactive,\n    };\n  };\n\n  // Arrow props getter\n  const getArrowProps = (args: PropsGetterArgs = {}) => {\n    return {\n      ...args,\n      ...attributes.arrow,\n      style: {\n        ...args.style,\n        ...styles.arrow,\n      },\n      'data-popper-arrow': true,\n    };\n  };\n\n  return {\n    getArrowProps,\n    getTooltipProps,\n    setTooltipRef,\n    setTriggerRef,\n    tooltipRef,\n    triggerRef,\n    visible,\n    ...popperProps,\n  };\n}\n"],"names":["useGetLatest","val","ref","React","useRef","current","useCallback","noop","useControlledState","initial","value","onChange","undefined","TypeError","useState","state","setState","getLatest","set","updater","updatedState","persist","isControlled","generateBoundingClientRect","x","y","width","height","top","right","bottom","left","virtualElement","getBoundingClientRect","defaultConfig","closeOnOutsideClick","closeOnTriggerHidden","defaultVisible","delayHide","delayShow","followCursor","interactive","mutationObserverOptions","attributes","childList","subtree","offset","trigger","usePopperTooltip","config","popperOptions","finalConfig","Object","keys","reduce","key","defaultModifiers","useMemo","name","options","Array","isArray","finalPopperOptions","placement","modifiers","triggerRef","setTriggerRef","tooltipRef","setTooltipRef","visible","onVisibleChange","setVisible","timer","useEffect","clearTimeout","usePopper","styles","popperProps","update","isTriggeredBy","includes","hideTooltip","window","setTimeout","showTooltip","toggleTooltip","handleClickOutside","event","target","composedPath","Node","contains","document","addEventListener","removeEventListener","preventDefaultAndToggle","preventDefault","isReferenceHidden","modifiersData","hide","setMousePosition","clientX","clientY","observer","MutationObserver","observe","disconnect","getTooltipProps","args","style","popper","getArrowProps","arrow"],"mappings":"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"}